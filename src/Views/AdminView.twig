{% extends "/templates/layout.twig" %}

{% block navbarContent %}
    {% if isAdmin %}
    <span class="text-success">Bienvenue {{ session.loginsUsername }}</span>
    <div class="inline">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a href="#publishChapter" class="text-dark navbar-nav-link">Chapitres publiés</a>
                <a href="#pendingChapter" class="text-dark navbar-nav-link">Chapitre en attente</a>
                <a href="#commentModeration" class="text-dark navbar-nav-link">Modération commentaires</a>
            </li>
        </ul>
    </div>
    <a href="../public/index.php?page=getLogout"><button class="btn btn-danger">Déconnexion</button></a>
    {% else %}
    <div class="inline">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a href="#chapter" class="text-dark navbar-nav-link">Accéder aux chapitres</a>
                <a href="" class="text-dark navbar-nav-link">A propos</a>
                <a href="" class="text-dark navbar-nav-link">Contact</a>
            </li>
        </ul>
    </div>
    <a href="../public/index.php?page=getLogin">
        <button class="btn btn-outline-danger">Connexion</button>
    </a>
    {% endif %}
{% endblock navbarContent %}

{% block mainHeader %}
    <img src="../public/data/img/write.jpg" alt="" class="main-header-img">
    <div class="main-header-container container ">
        <div class="main-header-jumbotron jumbotron ">
            <h1 class="display-4 bold">Bienvenue {{ session.loginsUsername }}</h1>
        </div>
    </div>
{% endblock %}

{% block chapterButton %}
    <div class="text-center my-2 margin-top">
        <a href="../public/index.php?page=addNewChapter" class="btn btn-lg btn-info">Écrire un chapitre</a>
    </div>    
{% endblock chapterButton %}

{% block publishedChapterContent %}
    <div id="publishChapter" class="my-4 bg-success">
        <h2 class="text-center"> Chapitre publiés </h2>
    </div>
    {% for chapter in publishedChaptersList %}
        <div class="container">
            <div class="card my-3 text-center">
                <h3 class="card-header">{{ chapter.title }}</h3>
                <p class="card-body">
                    Posté le <span class="font-italic">{{ chapter.createDate }}</span> 
                </p>
                <p class="text-center-justify">{{ chapter.content | slice(0, 10) }}</p>
                <div>
                    <a href="../public/index.php?page=single&chapterId={{ chapter.id }}">
                        <button class="btn btn-outline-info my-3">Voir le chapitre</button>
                    </a>
                    <a href="../public/index.php?page=modifyChapter&chapterId={{ chapter.id }}">
                        <button class="btn btn-outline-info my-3">Modifier le chapitre</button>
                    </a>
                    <a href="../public/index.php?page=deleteChapter&chapterId={{ chapter.id }}">
                        <button class="btn btn-danger my-3">Supprimer le chapitre</button>
                    </a>
                </div>
            </div>
        </div>    
    {% endfor %}    
{% endblock publishedChapterContent %}

{% block unpublishedChapterContent %}
    <div id="pendingChapter" class="my-4 bg-warning">
        <h2 class="text-center">Chapitre en attente de publication</h2>
    </div>
    {% for chapter in unpublishedChaptersList %}
        <div class="container">
            <div class="card my-3 text-center">
                <h3 class="card-header">{{ chapter.title }}</h3>
                <p class="card-body">
                    Posté le <span class="font-italic">{{ chapter.createDate }}</span> 
                </p>
                <p class="text-center-justify">{{ chapter.content }}</p>
                <div>
                    <a href="../public/index.php?page=modifyChapter&chapterId={{ chapter.id }}">
                        <button class="btn btn-outline-info my-3">Modifier le chapitre</button>
                    </a>
                    <a href="../public/index.php?page=publishChapter&chapterId={{ chapter.id }}">
                        <button class="btn btn-success my-3">Publier le chapitre</button>
                    </a>
                </div>
            </div>
        </div>    
    {% endfor %}
{% endblock unpublishedChapterContent %}

{% block commentContent %}
    <div id="commentModeration" class="my-4 bg-danger">
        <h2 class="text-center">Modération des commentaire</h2>
    </div>   
    {% for comment in reportedCommentList %}
        <div class="container">
            <div class="card my-3 text-center">
                <h3 class="card-header font-italic">
                    Posté le {{ comment.createdDate }} par {{ comment.author }}
                </h3>
                <p class="card-body text-center-justify">{{ comment.content }}</p>
                <div>
                    <a href="../public/index.php?page=modifyChapter&chapterId={{ chapter.id }}">
                        <button class="btn btn-success my-3">Valider le commentaire</button>
                    </a>
                    <a href="../public/index.php?page=publishChapter&chapterId={{ chapter.id }}">
                        <button class="btn btn-danger my-3">Supprimer le commentaire</button>
                    </a>
                </div>
            </div>
        </div>    
    {% endfor %} 
{% endblock commentContent %}